{% extends 'base/base.html' %}

{% block content %}

<div class="card">
   <div class="card-body">
       <h5 class="card-title">
           {% if form.instance.pk %}
               Edit Report
           {% else %}
               Add Report
           {% endif %}
       </h5>
       <form method="post" enctype="multipart/form-data" class="row g-3">
           {% csrf_token %}
           
           <div class="col-md-4">
               {{ form.patient.label_tag }}
               {{ form.patient }}
               {{ form.patient.errors }}
           </div>
           
           <div class="col-md-4">
               {{ form.date.label_tag }}
               {{ form.date }}
               {{ form.date.errors }}
           </div>

           <div class="col-md-4">
               {{ form.description.label_tag }}
               {{ form.description }}
               {{ form.description.errors }}
           </div>

           <div class="col-md-4">
               {% if form.instance.file %}
                   <a href="{{ form.instance.file.url }}" class="btn btn-info" target="_blank">View Current File</a>
               {% endif %}
               {{ form.file.label_tag }}
               {{ form.file }}
               {{ form.file.errors }}
           </div>

           <div class="text-center">
               <button type="submit" class="btn btn-primary">Save</button>
               <a href="{% url 'report_list' %}" class="btn btn-secondary">Cancel</a>
           </div>
       </form>
   </div>
</div>

{% endblock %}
